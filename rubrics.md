## PROJECT SPECIFICATION

# FlightSurety

Separation of Concerns, Operational Control and “Fail Fast”

| **CRITERIA**                                           | **MEETS SPECIFICATIONS**                                                                                                                                                                                                                                                                                           | MY_COMMENTS                                                                                                                                                    |
| ------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Smart Contract Seperation                              | Smart Contract code is separated into multiple contracts:1) FlightSuretyData.sol for data persistence``2) FlightSuretyApp.sol for app logic and oracles code                                                                                                                                                       | I didn't change the boilerpate. I just tried to fill existants functions and code new functions/features into App contract                                     |
| Dapp Created and Used for Contract Calls               | A Dapp client has been created and is used for triggering contract calls. Client can be launched with “npm run dapp” and is available at[http://localhost:8000](http://localhost:8000/)Specific contract calls:1) Passenger can purchase insurance for flight``2) Trigger contract to request flight status update | Passengers can purchase Insurance without problems and we catch events to refresh UI with the status code of the flight after being triggered on the fetch btn |
| Oracle Server Application                              | A server app has been created for simulating oracle behavior. Server can be launched with “npm run server”                                                                                                                                                                                                         | The server works well                                                                                                                                          |
| Operational status control is implemented in contracts | Students has implemented operational status control.                                                                                                                                                                                                                                                               | Operational status control work                                                                                                                                |
| Fail Fast Contract                                     | Contract functions “fail fast” by having a majority of “require()” calls at the beginning of function body                                                                                                                                                                                                         | A dozen of require calls exists on functions                                                                                                                   |

Airlines

| **CRITERIA**                    | **MEETS SPECIFICATIONS**                                                                                                                                                                                     | MY_COMMENTS                                                                              |
| ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------- |
| Airline Contract Initialization | First airline is registered when contract is deployed.                                                                                                                                                       | Yes, in the constructor of FlightSuretyData.sol                                          |
| Multiparty Consensus            | Only existing airline may register a new airline until there are at least four airlines registeredDemonstrated either with Truffle test or by making call from client Dapp                                   | Yes, with the requireAuthorizedCaller() modifier. Demonstrated on Truffle test, not Dapp |
| Multiparty Consensus            | Registration of fifth and subsequent airlines requires multi-party consensus of 50% of registered airlinesDemonstrated either with Truffle test or by making call from client Dapp                           | Yes, in the registerAirline() function. Demonstrated on Truffle test, not Dapp           |
| Airline Ante                    | Airline can be registered, but does not participate in contract until it submits funding of 10 ether (make sure it is**not** 10 wei)Demonstrated either with Truffle test or by making call from client Dapp | Yes, with the fund() function.<br />Demonstrated on Truffle test, not Dapp               |

Passengers

| **CRITERIA**             | **MEETS SPECIFICATIONS**                                                                                                                                                                                                                                                                                            | MY_COMMENTS                                                                                                                             |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| Passenger Airline Choice | Passengers can choose from a fixed list of flight numbers and departures that are defined in the Dapp clientYour UI implementation should include:1. Fields for Airline Address and Airline Name1. Amount of funds to send/which airline to send to1. Ability to purchase flight insurance for no more than 1 ether | flight fixed list:OK<br />airline field:exists<br />send amount :OK<br />wich airline : attached to flight<br /><1eth : HTML prevent OK |
| Passenger Payment        | Passengers may pay up to 1 ether for purchasing flight insurance.                                                                                                                                                                                                                                                   | smart-contract check --> OK                                                                                                             |
| Passenger Repayment      | If flight is delayed due to airline fault, passenger receives credit of 1.5X the amount they paid                                                                                                                                                                                                                   | coded into pay() function. Not asked for UI implementation. Callable from blockchain explorer                                           |
| Passenger Withdraw       | Passenger can withdraw any funds owed to them as a result of receiving credit for insurance payout                                                                                                                                                                                                                  | coded into creditInsurees() function. Not asked for UI implementation. Callable from blockchain explorer                                |
| Insurance Payouts        | Insurance payouts are not sent directly to passenger’s wallet                                                                                                                                                                                                                                                       | Yes, users have to call themselves pay() function to get their funds                                                                    |

Oracles (Server App)

| **CRITERIA**          | **MEETS SPECIFICATIONS**                                                                                                                                                                                                                                                                                      | MY_COMMENTS                                                                                                                                                                                                                                                             |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Functioning Oracle    | Oracle functionality is implemented in the server app.                                                                                                                                                                                                                                                        | I guess but no sure. Oracle's aim is to have multiple nodes if few of them are unreacheable. But in this architecture, if the server app crash, all of the oracles won't be reacheable by the smart-contract...                                                         |
| Oracle Initialization | Upon startup, 20+ oracles are registered and their assigned indexes are persisted in memory                                                                                                                                                                                                                   | Big tricky part. Oracle registration require to generate indexes. But after some registrations, the transaction failed cause overflows during the random processing... So I had to move those 20 oracle registrations from the constructor to the 2_deploy_contracts.js |
| Oracle Updates        | Update flight status requests from client Dapp result in OracleRequest event emitted by Smart Contract that is captured by server (displays on console and handled in code)                                                                                                                                   | Yes, in the anonymous callback function of this event                                                                                                                                                                                                                   |
| Oracle Functionality  | Server will loop through all registered oracles, identify those oracles for which the OracleRequest event applies, and respond by calling into FlightSuretyApp contract with random status code of Unknown (0), On Time (10) or Late Airline (20), Late Weather (30), Late Technical (40), or Late Other (50) | Done                                                                                                                                                                                                                                                                    |
